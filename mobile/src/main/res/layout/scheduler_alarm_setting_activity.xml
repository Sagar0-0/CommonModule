<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <data>

        <variable
            name="viewModel"
            type="fit.asta.health.scheduler.viewmodel.AlarmViewModel" />

        <variable
            name="backendViewModel"
            type="fit.asta.health.scheduler.viewmodel.SchedulerBackendViewModel" />

        <variable
            name="alarmItem"
            type="fit.asta.health.scheduler.model.db.entity.AlarmEntity" />

        <variable
            name="listener"
            type="fit.asta.health.scheduler.view.interfaces.BottomSheetInterface" />
    </data>

    <androidx.coordinatorlayout.widget.CoordinatorLayout
        android:id="@+id/coordinator"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <com.google.android.material.appbar.AppBarLayout
            android:id="@+id/appBarLayout"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:layout_gravity="top"
            android:background="@color/white">

            <androidx.appcompat.widget.Toolbar
                android:id="@+id/toolBar"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:setAsDefaultToolBar="@{``}"
                android:textSize="30sp"
                app:contentInsetEnd="0dp"
                app:contentInsetLeft="0dp"
                app:contentInsetRight="0dp"
                app:contentInsetStart="0dp"
                app:layout_scrollFlags="scroll|enterAlways">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <ImageButton
                        android:id="@+id/cancelButton"
                        android:layout_width="?attr/actionBarSize"
                        android:layout_height="?attr/actionBarSize"
                        android:background="?attr/selectableItemBackgroundBorderless"
                        android:contentDescription="@string/close_button"
                        android:dismissBottomSheet="@{``}"
                        android:src="@drawable/ic_baseline_close_24"
                        app:tint="#C2185B" />

                    <TextView
                        android:id="@+id/nameToolbar"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center_vertical"
                        android:layout_weight="1"
                        android:gravity="center_horizontal"
                        android:text="@string/alarm_settings"
                        android:textColor="@android:color/black"
                        android:textSize="20sp" />

                    <ImageButton
                        android:id="@+id/saveButton"
                        android:layout_width="?attr/actionBarSize"
                        android:layout_height="?attr/actionBarSize"
                        android:alarmItem="@{alarmItem}"
                        android:background="?attr/selectableItemBackgroundBorderless"
                        android:contentDescription="@string/save_button"
                        android:setAlarmDescription="@{selectedDescription}"
                        android:setAlarmImportant="@{switchImportant}"
                        android:setAlarmMode="@{selectedMode}"
                        android:setAlarmStatus="@{itemAlarmStarted}"
                        android:setAlarmTag="@{selectedTag}"
                        android:setAlarmTitle="@{selectedLabel}"
                        android:setAlarmTone="@{selectedTone}"
                        android:setAlarmVibrate="@{selectedVibrationPoint}"
                        android:setAlarmVibrateStatus="@{switchVibration}"
                        android:setAlarmViewModel="@{viewModel}"
                        android:setAlarmWeek="@{selectedDays}"
                        android:setBackendConnectivityViewModel="@{backendViewModel}"
                        android:setTimepicker="@{timepicker}"
                        android:src="@drawable/ic_baseline_check_24"
                        app:tint="#4CAF50" />
                </LinearLayout>

            </androidx.appcompat.widget.Toolbar>

        </com.google.android.material.appbar.AppBarLayout>

        <androidx.core.widget.NestedScrollView
            android:id="@+id/bottomSheet"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fillViewport="true"
            app:layout_behavior="@string/appbar_scrolling_view_behavior">

            <LinearLayout xmlns:tools="http://schemas.android.com/tools"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:padding="8dp">

                <!--    android:checked="@{alarmItem.alarmInterval.intervalBeingUsed}"-->
                <!--    android:retrieveSwitches="@{alarmItem}"-->

                <com.google.android.material.card.MaterialCardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:elevation="0dp"
                    app:cardCornerRadius="8dp"
                    app:cardElevation="0dp">

                    <TimePicker
                        android:id="@+id/timepicker"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:retrieveAlarmTime="@{alarmItem}"
                        android:timePickerMode="clock"
                        android:visibility="visible" />
                </com.google.android.material.card.MaterialCardView>

                <LinearLayout
                    android:id="@+id/alarmStatusContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_alert" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/status"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/item_alarm_started"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:checked="@{alarmItem.status}"
                        android:retrieveSwitches="@{alarmItem}"
                        android:thumb="@drawable/custom_thumb"
                        app:track="@drawable/custom_track" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmRepeatContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp"
                    android:setupAlarmRepeatChangedListener="@{listener}"
                    android:setupRepeatInputItem="@{alarmItem}">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_calendar_edit" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/repeat"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedDays"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:retrieveAlarmWeek="@{alarmItem}"
                        android:text="Option"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="12dp"
                        android:paddingBottom="12dp"
                        android:src="@drawable/ic_ic24_right_arrow" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmTagContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_label" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/tag"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedTag"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:retrieveAlarmTag="@{alarmItem}"
                        android:text="Option"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="12dp"
                        android:paddingBottom="12dp"
                        android:src="@drawable/ic_ic24_right_arrow" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmLabelContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp"
                    android:setupAlarmLabelChangedListener="@{listener}"
                    android:setupLabelInputItem="@{alarmItem}">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_label" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/label"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedLabel"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:tag="@{alarmItem.info.name}"
                        android:text="@{alarmItem.info.name}"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="12dp"
                        android:paddingBottom="12dp"
                        android:src="@drawable/ic_ic24_right_arrow" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmDescriptionContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp"
                    android:setupAlarmDescriptionChangedListener="@{listener}"
                    android:setupDescriptionInputItem="@{alarmItem}">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_description" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/description"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedDescription"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:tag="@{alarmItem.info.description}"
                        android:text="@{alarmItem.info.description}"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="12dp"
                        android:paddingBottom="12dp"
                        android:src="@drawable/ic_ic24_right_arrow" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmIntervalContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_time" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/intervals_amp_time_settings"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:text="Option"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="12dp"
                        android:paddingBottom="12dp"
                        android:src="@drawable/ic_ic24_right_arrow" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmRemainderModeContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp"
                    android:setupAlarmReminderModeChangedListener="@{listener}"
                    android:setupReminderModeInputItem="@{alarmItem}">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_notification" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="@string/reminder_mode"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedMode"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:tag="@{alarmItem.mode}"
                        android:text="@{alarmItem.mode}"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:paddingTop="12dp"
                        android:paddingBottom="12dp"
                        android:src="@drawable/ic_ic24_right_arrow" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmVibrationContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp"
                    android:setupAlarmVibrationChangedListener="@{listener}"
                    android:setupVibrationInputItem="@{alarmItem}">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_vibrate" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="Vibration"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedVibrationPoint"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:retrieveAlarmVibrationPoints="@{alarmItem}"
                        android:retrieveAlarmVibrationStatus="@{switchVibration}"
                        android:tag="50"
                        android:text="Pattern 1"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/switchVibration"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:checked="@{alarmItem.vibration.status}"
                        android:retrieveSwitches="@{alarmItem}"
                        android:tag="@{alarmItem.vibration.status}"
                        android:thumb="@drawable/custom_thumb"
                        app:track="@drawable/custom_track" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmToneContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"
                    android:padding="8dp"
                    android:setupRingtoneLabelLayout="@{selectedTone}"
                    android:setupSoundInputItem="@{alarmItem}">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_voice" />

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:text="Sound"
                        android:textColor="@color/black"
                        android:textSize="16sp" />

                    <TextView
                        android:id="@+id/selectedTone"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="8dp"
                        android:layout_marginEnd="8dp"
                        android:layout_weight="1"
                        android:retrieveAlarmSound="@{alarmItem}"
                        android:text="@string/default_tone"
                        android:textAlignment="textEnd"
                        android:textColor="@color/sub_text_color"
                        android:textSize="14sp" />

                    <androidx.appcompat.widget.SwitchCompat
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:thumb="@drawable/custom_thumb"
                        app:track="@drawable/custom_track" />
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/alarmImportantContainer"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="8dp">

                    <ImageView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:src="@drawable/ic_ic24_warning" />

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical">

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="8dp"
                            android:layout_marginEnd="8dp"
                            android:text="Important"
                            android:textColor="@color/black"
                            android:textSize="16sp"
                            tools:ignore="Suspicious0dp" />

                        <TextView
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="8dp"
                            android:layout_marginEnd="8dp"
                            android:text="@string/this_will_make_sure_you_attempt_with_the_help_of_flashlight_sound_changes_vibration_etc"
                            android:textColor="@color/sub_text_color"
                            android:textSize="14sp"
                            tools:ignore="Suspicious0dp" />
                    </LinearLayout>

                    <androidx.appcompat.widget.SwitchCompat
                        android:id="@+id/switchImportant"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:checked="@{alarmItem.important}"
                        android:retrieveSwitches="@{alarmItem}"
                        android:thumb="@drawable/custom_thumb"
                        app:track="@drawable/custom_track" />
                </LinearLayout>

            </LinearLayout>
        </androidx.core.widget.NestedScrollView>

    </androidx.coordinatorlayout.widget.CoordinatorLayout>
</layout>
